<aside class="sidebar" id="sidebar">
  <button class="sidebar-close-btn" id="sidebarCloseBtn"><i class="bx bx-x"></i></button>
  <div class="sidebar-header">
    <div class="school-info">
      {% load static %}
      <img src="{% static 'images/school-logo.png' %}" alt="HBR School Logo" class="school-logo" />
      <h1>HBR School Dashboard</h1>
      {% if current_session %}
        <p class="current-session">{{ current_session.year }}</p>
      {% endif %}
    </div>
    <div class="sidebar-actions">
      <a href="/" class="view-site-btn" target="_blank"><i class="bx bx-globe"></i> Visit Homepage</a>
    </div>
  </div>

  {% with url_name=request.resolver_match.url_name %}
    <nav class="sidebar-nav">
      <a href="{% url 'dashboard:dashboard' %}" class="{% if url_name == 'dashboard' %}active{% endif %}"><i class="bx bx-home"></i> Home</a>
      <a href="{% url 'attendance:attendance' %}" class="{% if url_name == 'attendance' %}active{% endif %}"><i class="bx bx-calendar-alt"></i>Attendance</a>
      {% if role == 'Teacher' %}
        <a href="{% url 'attendance:mark_student_attendance' %}" class="{% if url_name == 'mark_student_attendance' %}active{% endif %}"><i class="bx bx-check-circle"></i>Mark Student Attendance</a>
        <a href="{% url 'academics:teacher_exam_marking' %}" class="{% if url_name == 'teacher_exam_marking' %}active{% endif %}"><i class="bx bx-edit"></i>Mark Exam Results</a>
      {% endif %}
      {% if role == 'Admin' %}
        <a href="{% url 'attendance:mark_teacher_attendance' %}" class="{% if url_name == 'mark_teacher_attendance' %}active{% endif %}"><i class="bx bx-user-check"></i>Mark Teacher Attendance</a>
      {% endif %}
      {% if role == 'Admin' %}
        <a href="{% url 'leave:leave' %}" class="{% if url_name == 'leave' %}active{% endif %}"><i class="bx bx-calendar-check"></i> Approve Leave</a>
      {% else %}
        <a href="{% url 'leave:leave' %}" class="{% if url_name == 'leave' %}active{% endif %}"><i class="bx bx-calendar-check"></i> Apply Leave</a>
      {% endif %}
      {% if role == 'Student' %}
        <a href="{% url 'students:documents' %}" class="{% if url_name == 'documents' %}active{% endif %}"><i class="bx bx-folder"></i> My Documents</a>
        <a href="{% url 'students:certificates' %}" class="{% if url_name == 'certificates' %}active{% endif %}"><i class="bx bx-trophy"></i> My Certificates</a>
        <a href="/students/payments/" class="{% if url_name == 'payments' %}active{% endif %}"><i class="bx bx-wallet"></i>Payments</a>
      {% elif role == 'Teacher' %}
        <a href="/teachers/salary/" class="{% if url_name == 'salary' %}active{% endif %}"><i class="bx bx-wallet"></i>Salary Records</a>
      {% endif %}
      {% if role == 'Student' %}
        <a href="{% url 'academics:exams' %}" class="{% if url_name == 'exams' %}active{% endif %}"><i class="bx bx-book"></i> My Exams</a>
      {% endif %}
      {% if role == 'Student' %}
        <a href="{% url 'students:profile' %}" class="{% if url_name == 'profile' %}active{% endif %}"><i class="bx bx-user"></i> My Profile</a>
      {% elif role == 'Teacher' %}
        <a href="{% url 'teachers:profile' %}" class="{% if url_name == 'profile' %}active{% endif %}"><i class="bx bx-user"></i> My Profile</a>
      {% elif role == 'Admin' %}
        <a href="{% url 'administration:profile' %}" class="{% if request.path == '/administration/profile/' %}active{% endif %}"><i class="bx bx-user"></i> My Profile</a>
        <a href="{% url 'students:class_management' %}" class="{% if url_name == 'class_management' %}active{% endif %}"><i class="bx bx-group"></i> Class Management</a>
        <a href="{% url 'students:student_management' %}" class="{% if url_name == 'student_management' or request.path|slice:':10' == '/students/' and url_name != 'class_management' %}active{% endif %}"><i class="bx bxs-user-detail"></i> Student Management</a>
        <a href="{% url 'academics:admin_exam_management' %}" class="{% if url_name == 'admin_exam_management' or request.path|slice:':10' == '/academics/' %}active{% endif %}"><i class="bx bx-book"></i> Exam Management</a>
        <a href="{% url 'teachers:teacher_management' %}" class="{% if url_name == 'teacher_management' or request.path|slice:':10' == '/teachers/' %}active{% endif %}"><i class="bx bx-chalkboard"></i> Teacher Management</a>
        <a href="{% url 'notices:notice_board' %}" class="{% if url_name == 'notice_board' %}active{% endif %}"><i class="bx bx-bell"></i> Notice Board</a>
        <a href="{% url 'dashboard:settings' %}" class="{% if url_name == 'settings' %}active{% endif %}"><i class="bx bx-cog"></i> Settings</a>
      {% endif %}
    </nav>
  {% endwith %}
</aside>
